{
  "timestamp": "2025-09-03T14:29:16.969Z",
  "status": "COMPLETADO",
  "phases": [
    "Creación de tablas faltantes",
    "Creación de buckets de storage",
    "Configuración de políticas RLS",
    "Creación de funciones y triggers",
    "Creación de índices",
    "Configuración de políticas de storage",
    "Validación final"
  ],
  "results": [
    {
      "message": "📋 FASE 1: CREANDO TABLAS FALTANTES...",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:14.294Z"
    },
    {
      "message": "🔧 Ejecutando: Crear tabla profiles",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:14.295Z"
    },
    {
      "message": "❌ Error en Crear tabla profiles: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:14.698Z"
    },
    {
      "message": "🔧 Ejecutando: Crear tabla properties",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:14.698Z"
    },
    {
      "message": "❌ Error en Crear tabla properties: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:14.801Z"
    },
    {
      "message": "🔧 Ejecutando: Crear tabla favorites",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:14.801Z"
    },
    {
      "message": "❌ Error en Crear tabla favorites: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:14.838Z"
    },
    {
      "message": "🔧 Ejecutando: Crear tabla search_history",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:14.838Z"
    },
    {
      "message": "❌ Error en Crear tabla search_history: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:14.875Z"
    },
    {
      "message": "🔧 Ejecutando: Crear tabla inquiries",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:14.876Z"
    },
    {
      "message": "❌ Error en Crear tabla inquiries: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:14.912Z"
    },
    {
      "message": "🗂️ FASE 2: CREANDO BUCKETS DE STORAGE FALTANTES...",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:14.912Z"
    },
    {
      "message": "❌ Error creando bucket community-photos: signature verification failed",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.113Z"
    },
    {
      "message": "🔒 FASE 3: CONFIGURANDO POLÍTICAS RLS...",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.113Z"
    },
    {
      "message": "🔧 Ejecutando: Enable RLS on profiles",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.113Z"
    },
    {
      "message": "❌ Error en Enable RLS on profiles: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.152Z"
    },
    {
      "message": "🔧 Ejecutando: Enable RLS on properties",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.153Z"
    },
    {
      "message": "❌ Error en Enable RLS on properties: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.193Z"
    },
    {
      "message": "🔧 Ejecutando: Enable RLS on favorites",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.194Z"
    },
    {
      "message": "❌ Error en Enable RLS on favorites: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.230Z"
    },
    {
      "message": "🔧 Ejecutando: Enable RLS on search_history",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.230Z"
    },
    {
      "message": "❌ Error en Enable RLS on search_history: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.271Z"
    },
    {
      "message": "🔧 Ejecutando: Enable RLS on inquiries",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.271Z"
    },
    {
      "message": "❌ Error en Enable RLS on inquiries: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.312Z"
    },
    {
      "message": "🔧 Ejecutando: Profiles - Users can view all profiles",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.312Z"
    },
    {
      "message": "❌ Error en Profiles - Users can view all profiles: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.350Z"
    },
    {
      "message": "🔧 Ejecutando: Profiles - Users can update own profile",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.351Z"
    },
    {
      "message": "❌ Error en Profiles - Users can update own profile: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.388Z"
    },
    {
      "message": "🔧 Ejecutando: Profiles - Users can insert own profile",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.388Z"
    },
    {
      "message": "❌ Error en Profiles - Users can insert own profile: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.425Z"
    },
    {
      "message": "🔧 Ejecutando: Properties - Anyone can view active properties",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.425Z"
    },
    {
      "message": "❌ Error en Properties - Anyone can view active properties: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.463Z"
    },
    {
      "message": "🔧 Ejecutando: Properties - Owners can manage their properties",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.463Z"
    },
    {
      "message": "❌ Error en Properties - Owners can manage their properties: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.501Z"
    },
    {
      "message": "🔧 Ejecutando: Properties - Authenticated users can create properties",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.501Z"
    },
    {
      "message": "❌ Error en Properties - Authenticated users can create properties: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.537Z"
    },
    {
      "message": "🔧 Ejecutando: Favorites - Users can manage their favorites",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.537Z"
    },
    {
      "message": "❌ Error en Favorites - Users can manage their favorites: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.587Z"
    },
    {
      "message": "🔧 Ejecutando: Search History - Users can manage their search history",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.587Z"
    },
    {
      "message": "❌ Error en Search History - Users can manage their search history: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.629Z"
    },
    {
      "message": "🔧 Ejecutando: Inquiries - Users can view inquiries for their properties",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.629Z"
    },
    {
      "message": "❌ Error en Inquiries - Users can view inquiries for their properties: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.668Z"
    },
    {
      "message": "🔧 Ejecutando: Inquiries - Authenticated users can create inquiries",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.668Z"
    },
    {
      "message": "❌ Error en Inquiries - Authenticated users can create inquiries: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.709Z"
    },
    {
      "message": "⚡ FASE 4: CREANDO FUNCIONES Y TRIGGERS...",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.709Z"
    },
    {
      "message": "🔧 Ejecutando: handle_new_user function",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.709Z"
    },
    {
      "message": "❌ Error en handle_new_user function: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.744Z"
    },
    {
      "message": "🔧 Ejecutando: update_updated_at function",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.745Z"
    },
    {
      "message": "❌ Error en update_updated_at function: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.787Z"
    },
    {
      "message": "🔧 Ejecutando: on_auth_user_created trigger",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.787Z"
    },
    {
      "message": "❌ Error en on_auth_user_created trigger: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.833Z"
    },
    {
      "message": "🔧 Ejecutando: update_profiles_updated_at trigger",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.837Z"
    },
    {
      "message": "❌ Error en update_profiles_updated_at trigger: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.877Z"
    },
    {
      "message": "🔧 Ejecutando: update_properties_updated_at trigger",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.877Z"
    },
    {
      "message": "❌ Error en update_properties_updated_at trigger: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.920Z"
    },
    {
      "message": "🔧 Ejecutando: update_inquiries_updated_at trigger",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.920Z"
    },
    {
      "message": "❌ Error en update_inquiries_updated_at trigger: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.958Z"
    },
    {
      "message": "📊 FASE 5: CREANDO ÍNDICES PARA OPTIMIZACIÓN...",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.958Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice properties_city_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.958Z"
    },
    {
      "message": "❌ Error en Crear índice properties_city_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:15.994Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice properties_property_type_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:15.994Z"
    },
    {
      "message": "❌ Error en Crear índice properties_property_type_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.037Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice properties_operation_type_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.038Z"
    },
    {
      "message": "❌ Error en Crear índice properties_operation_type_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.086Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice properties_price_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.086Z"
    },
    {
      "message": "❌ Error en Crear índice properties_price_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.124Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice properties_status_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.124Z"
    },
    {
      "message": "❌ Error en Crear índice properties_status_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.170Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice properties_created_at_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.170Z"
    },
    {
      "message": "❌ Error en Crear índice properties_created_at_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.205Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice properties_location_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.206Z"
    },
    {
      "message": "❌ Error en Crear índice properties_location_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.240Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice favorites_user_id_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.240Z"
    },
    {
      "message": "❌ Error en Crear índice favorites_user_id_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.290Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice search_history_user_id_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.291Z"
    },
    {
      "message": "❌ Error en Crear índice search_history_user_id_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.333Z"
    },
    {
      "message": "🔧 Ejecutando: Crear índice inquiries_property_id_idx",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.333Z"
    },
    {
      "message": "❌ Error en Crear índice inquiries_property_id_idx: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.370Z"
    },
    {
      "message": "🗄️ FASE 6: CONFIGURANDO POLÍTICAS DE STORAGE...",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.371Z"
    },
    {
      "message": "🔧 Ejecutando: property-images public access",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.371Z"
    },
    {
      "message": "❌ Error en property-images public access: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.406Z"
    },
    {
      "message": "🔧 Ejecutando: property-images authenticated upload",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.407Z"
    },
    {
      "message": "❌ Error en property-images authenticated upload: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.443Z"
    },
    {
      "message": "🔧 Ejecutando: avatars public access",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.444Z"
    },
    {
      "message": "❌ Error en avatars public access: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.484Z"
    },
    {
      "message": "🔧 Ejecutando: avatars user upload",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.484Z"
    },
    {
      "message": "❌ Error en avatars user upload: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.534Z"
    },
    {
      "message": "🔧 Ejecutando: community-photos public access",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.534Z"
    },
    {
      "message": "❌ Error en community-photos public access: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.573Z"
    },
    {
      "message": "🔧 Ejecutando: community-photos authenticated upload",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.573Z"
    },
    {
      "message": "❌ Error en community-photos authenticated upload: Invalid API key",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.610Z"
    },
    {
      "message": "🔍 FASE 7: VALIDACIÓN FINAL...",
      "type": "INFO",
      "timestamp": "2025-09-03T14:29:16.611Z"
    },
    {
      "message": "❌ Verificar tablas creadas: FALLÓ",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.656Z"
    },
    {
      "message": "❌ Verificar bucket community-photos: FALLÓ",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.867Z"
    },
    {
      "message": "❌ Verificar políticas RLS: FALLÓ",
      "type": "ERROR",
      "timestamp": "2025-09-03T14:29:16.968Z"
    }
  ],
  "errors": [
    {
      "message": "❌ Error en Crear tabla profiles: Invalid API key",
      "timestamp": "2025-09-03T14:29:14.698Z"
    },
    {
      "message": "❌ Error en Crear tabla properties: Invalid API key",
      "timestamp": "2025-09-03T14:29:14.801Z"
    },
    {
      "message": "❌ Error en Crear tabla favorites: Invalid API key",
      "timestamp": "2025-09-03T14:29:14.838Z"
    },
    {
      "message": "❌ Error en Crear tabla search_history: Invalid API key",
      "timestamp": "2025-09-03T14:29:14.875Z"
    },
    {
      "message": "❌ Error en Crear tabla inquiries: Invalid API key",
      "timestamp": "2025-09-03T14:29:14.912Z"
    },
    {
      "message": "❌ Error creando bucket community-photos: signature verification failed",
      "timestamp": "2025-09-03T14:29:15.113Z"
    },
    {
      "message": "❌ Error en Enable RLS on profiles: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.152Z"
    },
    {
      "message": "❌ Error en Enable RLS on properties: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.193Z"
    },
    {
      "message": "❌ Error en Enable RLS on favorites: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.230Z"
    },
    {
      "message": "❌ Error en Enable RLS on search_history: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.271Z"
    },
    {
      "message": "❌ Error en Enable RLS on inquiries: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.312Z"
    },
    {
      "message": "❌ Error en Profiles - Users can view all profiles: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.350Z"
    },
    {
      "message": "❌ Error en Profiles - Users can update own profile: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.388Z"
    },
    {
      "message": "❌ Error en Profiles - Users can insert own profile: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.425Z"
    },
    {
      "message": "❌ Error en Properties - Anyone can view active properties: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.463Z"
    },
    {
      "message": "❌ Error en Properties - Owners can manage their properties: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.501Z"
    },
    {
      "message": "❌ Error en Properties - Authenticated users can create properties: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.537Z"
    },
    {
      "message": "❌ Error en Favorites - Users can manage their favorites: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.587Z"
    },
    {
      "message": "❌ Error en Search History - Users can manage their search history: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.629Z"
    },
    {
      "message": "❌ Error en Inquiries - Users can view inquiries for their properties: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.668Z"
    },
    {
      "message": "❌ Error en Inquiries - Authenticated users can create inquiries: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.709Z"
    },
    {
      "message": "❌ Error en handle_new_user function: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.744Z"
    },
    {
      "message": "❌ Error en update_updated_at function: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.787Z"
    },
    {
      "message": "❌ Error en on_auth_user_created trigger: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.833Z"
    },
    {
      "message": "❌ Error en update_profiles_updated_at trigger: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.877Z"
    },
    {
      "message": "❌ Error en update_properties_updated_at trigger: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.920Z"
    },
    {
      "message": "❌ Error en update_inquiries_updated_at trigger: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.958Z"
    },
    {
      "message": "❌ Error en Crear índice properties_city_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:15.994Z"
    },
    {
      "message": "❌ Error en Crear índice properties_property_type_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.037Z"
    },
    {
      "message": "❌ Error en Crear índice properties_operation_type_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.086Z"
    },
    {
      "message": "❌ Error en Crear índice properties_price_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.124Z"
    },
    {
      "message": "❌ Error en Crear índice properties_status_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.170Z"
    },
    {
      "message": "❌ Error en Crear índice properties_created_at_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.205Z"
    },
    {
      "message": "❌ Error en Crear índice properties_location_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.240Z"
    },
    {
      "message": "❌ Error en Crear índice favorites_user_id_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.290Z"
    },
    {
      "message": "❌ Error en Crear índice search_history_user_id_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.333Z"
    },
    {
      "message": "❌ Error en Crear índice inquiries_property_id_idx: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.370Z"
    },
    {
      "message": "❌ Error en property-images public access: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.406Z"
    },
    {
      "message": "❌ Error en property-images authenticated upload: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.443Z"
    },
    {
      "message": "❌ Error en avatars public access: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.484Z"
    },
    {
      "message": "❌ Error en avatars user upload: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.534Z"
    },
    {
      "message": "❌ Error en community-photos public access: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.573Z"
    },
    {
      "message": "❌ Error en community-photos authenticated upload: Invalid API key",
      "timestamp": "2025-09-03T14:29:16.610Z"
    },
    {
      "message": "❌ Verificar tablas creadas: FALLÓ",
      "timestamp": "2025-09-03T14:29:16.656Z"
    },
    {
      "message": "❌ Verificar bucket community-photos: FALLÓ",
      "timestamp": "2025-09-03T14:29:16.867Z"
    },
    {
      "message": "❌ Verificar políticas RLS: FALLÓ",
      "timestamp": "2025-09-03T14:29:16.968Z"
    }
  ],
  "warnings": [],
  "summary": {
    "totalOperations": 95,
    "errors": 46,
    "warnings": 0,
    "successRate": 52
  }
}